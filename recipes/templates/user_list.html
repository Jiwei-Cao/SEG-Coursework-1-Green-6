{% extends 'base_content.html' %}
{% block content %}
<div class = "container p-2">
<h1 class = "text-center mb-4">{{ title }}</h1>

<ul class = "list-group">
    {% for user in users %}
        <li class="list-group-item d-flex justify-content-between align-items-center" style="min-height: 70px;">
            <div class = "d-flex align-items-center">
            <img src="{{ user.gravatar }}" class="pfp rounded-circle me-2" style="
                width: 30px;
                height: 30px;" />
            <a href="{% url 'user_profile' user.username %}" class = "fw-medium">
                {{ user.username }}
            </a>
            </div>
            {% if user.id in following_ids %}
                {% if user.id != current_user.id %}
                <form method="post" action="{% url 'unfollow_user' user.id %}">
                    {% csrf_token %}
                    <button type="submit" class = "unfollow-button mt-1"><i class = "bi bi-dash"></i>Unfollow</button>
                </form>
                {% endif %}
            {% else %}
                {% if user.id != current_user.id %}
                <form method="post" action="{% url 'follow_user' user.id %}">
                    {% csrf_token %}
                    <button type="submit" class = "follow-button mt-1"><i class = "bi bi-plus"></i>Follow</button>
                </form>
                {% endif %}
            {% endif %}
    {% empty %}
        <li class="list-group-item">No users found.</li>
    {% endfor %}
  </ul>
  </div>
{% endblock %}
