{% extends 'base_content.html' %}
{% load widget_tweaks %} 
{% block content %}
<div class="container">
<h2 class = "mb-4">Your Ingredients <i class="bi bi-basket"></i></h2>
<div class="card shadow-sm mb-4">
  <div class="card-body p-0">
    <ul class="list-group list-group-flush">

      {% for ingredient_item in ingredients_list %}
        <li class="list-group-item d-flex justify-content-between align-items-center py-3">
          
          <span class="fw-medium">
            {{ ingredient_item.ingredient_line }}
          </span>

          <button 
            class="btn btn-sm btn-outline-danger" 
            data-bs-toggle="modal" 
            data-bs-target="#deleteIngredient-{{ ingredient_item.ingredient.pk }}"
          >
            <i class="bi bi-trash3-fill"></i>
          </button>
          <!-- Modal -->
          {% include "partials/delete_modal.html" with prefix="deleteIngredient" item=ingredient_item.ingredient text="Are you sure you want to delete this ingredient" url_name='delete_ingredient' %}
      </li>
      {% empty %}
          <p class = "text-muted text-center mt-3"> No ingredient in cupboard yet. Add some ingredient here <i class="bi bi-arrow-90deg-down"></i></p>
    {% endfor %}
  </ul>
  </div>
  </div>
<h4>Add new ingredient</h4>
<form method="post">
    {% csrf_token %} 
    {% for field in form %} 
        {% if field.name != 'public' %}
        <div class="mb-3">
        <label class="form-label" for="{{ field.id_for_label }}">
            {{ field.label }}
        </label>

        {% if form.is_bound %} 
            {% if field.errors %} 
                {% render_field field class="form-control is-invalid" %} 
            {% else %} 
                {% render_field field class="form-control is-valid" %} 
            {% endif %} 
        {% else %} 
            {% render_field field class="form-control" %} 
        {% endif %} 
        {% if field.help_text %}
            <div class="form-text">{{ field.help_text }}</div>
        {% endif %}

        <div class="invalid-feedback">{{ field.errors }}</div>
        </div>
        {% endif %} 
    {% endfor %}
    <button type="submit" class = "submit-button">Add Ingredient</button>
</form>
</div>
{% endblock %}